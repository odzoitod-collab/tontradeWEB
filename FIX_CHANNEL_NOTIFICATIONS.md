# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞ –≤ –∫–∞–Ω–∞–ª –ø—Ä–∏—Ö–æ–¥–∏–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: Unknown (–ù–µ—Ç –Ω–∏–∫–Ω–µ–π–º–∞) ID: 12345
üë®‚Äçüíº –í–æ—Ä–∫–µ—Ä: –ü—Ä—è–º–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```

## –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ–∞–π–ª–µ `WalletPage.tsx` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è fallback –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```typescript
// –ü–æ—Å–ª–µ–¥–Ω–∏–π fallback –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
if (!userId) {
    userId = 12345; // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
}
```

–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ:
1. –ó–∞–ø—Ä–æ—Å –∫ –ë–î –∏—Å–∫–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID 12345 (–∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç)
2. `userData` –±—ã–ª `null`
3. –û—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è "Unknown" –∏ "–ù–µ—Ç –Ω–∏–∫–Ω–µ–π–º–∞"

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `getCurrentUserId()`
```typescript
import { getCurrentUserId } from '../utils/auth';
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è userId
```typescript
// –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Telegram WebApp > URL > localStorage)
const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user;
let userId = tgUser?.id;

// Fallback 1: —á–∏—Ç–∞–µ–º tgid –∏–∑ URL
if (!userId) {
    const urlParams = new URLSearchParams(window.location.search);
    const urlTgId = urlParams.get('tgid');
    if (urlTgId && !isNaN(Number(urlTgId))) {
        userId = Number(urlTgId);
    }
}

// Fallback 2: —á–∏—Ç–∞–µ–º –∏–∑ localStorage (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É)
if (!userId) {
    const storedUserId = getCurrentUserId();
    if (storedUserId) {
        userId = storedUserId;
        console.log('WalletPage: –ò—Å–ø–æ–ª—å–∑—É–µ–º ID –∏–∑ localStorage:', userId);
    }
}

// –ü–æ—Å–ª–µ–¥–Ω–∏–π fallback - –æ—à–∏–±–∫–∞
if (!userId) {
    alert('–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ.');
    return;
}
```

### 3. –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è
–£–¥–∞–ª–µ–Ω –≤—ã–∑–æ–≤ `notifyDepositToChannel()` –∏–∑ `App.tsx`, —Ç–∞–∫ –∫–∞–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ `WalletPage.tsx`.

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤ –∫–∞–Ω–∞–ª –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
üîî –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –ü–û–ü–û–õ–ù–ï–ù–ò–ï

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ (@ivan_trader) ID: 844012884
üë®‚Äçüíº –í–æ—Ä–∫–µ—Ä: –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤ (@petr_worker) ID: 6935385024
üí∞ –°—É–º–º–∞: 953 RUB
üíµ –í USDT: ‚âà $10.01
üåç –°—Ç—Ä–∞–Ω–∞: –†–æ—Å—Å–∏—è
üè¶ –í–∞–ª—é—Ç–∞: RUB
üìÖ –î–∞—Ç–∞: 26.01.2026, 23:34:13
üÜî ID –∑–∞—è–≤–∫–∏: 1769463253916

üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω
```

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **components/WalletPage.tsx**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `getCurrentUserId`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è userId —Å 3 fallback'–∞–º–∏
   - –£–¥–∞–ª–µ–Ω fallback `userId = 12345`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å alert'–æ–º –µ—Å–ª–∏ userId –Ω–µ –Ω–∞–π–¥–µ–Ω

2. **App.tsx**
   - –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `notifyDepositToChannel`
   - –£–¥–∞–ª–µ–Ω –≤—ã–∑–æ–≤ `notifyDepositToChannel()` (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

3. **NOTIFICATIONS_SETUP.md**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–∞–Ω–∞–ª–∞
   - –£–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è (WalletPage.tsx)

4. **QUICK_START_NOTIFICATIONS.md**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –±—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ü—Ä–æ–≤–µ—Ä–∫–∞

### –¢–µ—Å—Ç 1: –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç —á–µ—Ä–µ–∑ Telegram
2. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –í –∫–∞–Ω–∞–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### –¢–µ—Å—Ç 2: –í—Ö–æ–¥ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É (–Ω–∏–∫ + –∫–æ–¥)
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
3. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –í –∫–∞–Ω–∞–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
```

### –¢–µ—Å—Ç 3: –ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```
1. –û—á–∏—Å—Ç–∏—Ç–µ localStorage
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è alert —Å –æ—à–∏–±–∫–æ–π
```

## –õ–æ–≥–∏

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
WalletPage: –ò—Å–ø–æ–ª—å–∑—É–µ–º ID –∏–∑ localStorage: 844012884
–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram: Object
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–æ—Ä–∫–µ—Ä—É 6935385024
```

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–æ–≥–∏ (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è):
```
‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –∫–∞–Ω–∞–ª: Object
api.telegram.org/.../sendMessage Failed to load resource: 400
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–∞

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞–Ω–∞–ª –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `tontradeWEB/components/WalletPage.tsx`
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É (–æ–∫–æ–ª–æ 585):
   ```typescript
   const chatId = '-1003560670670';
   ```
3. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∫–∞–Ω–∞–ª:
   ```typescript
   const chatId = '@–≤–∞—à_–∫–∞–Ω–∞–ª'; // –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ
   // –∏–ª–∏
   const chatId = '-1001234567890'; // –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ
   ```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –¢–æ–∫–µ–Ω –±–æ—Ç–∞
–í —Ç–æ–π –∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:
```typescript
const botToken = '8312481233:AAH_CzfX314D_dbthhUBdZ5SoAzO3scrEu0';
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `sendToTelegram()` –≤ —Ñ–∞–π–ª–µ `WalletPage.tsx` (—Å—Ç—Ä–æ–∫–∞ 565).

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–î–∞—Ç–∞:** 26 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 2.0.1
