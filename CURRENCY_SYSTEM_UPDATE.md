# Обновление системы валют в торговле

## Что изменено:

### 1. Торговля в валюте пользователя
- Если пользователь выбрал **рубли** как основную валюту, вся торговля происходит в рублях
- Сумма ставки указывается в рублях
- PnL (прибыль/убыток) рассчитывается и показывается в рублях
- История сделок отображается в рублях

### 2. Суммы по умолчанию для разных валют:
- **RUB**: 10,000₽ (≈ $100)
- **KZT**: 45,000₸ (≈ $100) 
- **UZS**: 1,235,000 сум (≈ $100)
- **USD**: $100

### 3. Кнопки изменения суммы адаптированы:
- **RUB**: ±5,000₽
- **KZT**: ±22,500₸
- **UZS**: ±617,500 сум
- **USD**: ±$50

## Примеры работы:

### Пример 1: Торговля в рублях
- Баланс: 50,000₽
- Ставка: 10,000₽
- Рост монеты: +2%
- Плечо: x10
- **Прибыль: +2,000₽**

### Пример 2: Торговля в тенге
- Баланс: 225,000₸
- Ставка: 45,000₸
- Падение монеты: -1.5%
- Плечо: x5
- **Убыток: -3,375₸**

## Техническая реализация:

### В форме торговли:
```javascript
// Показываем символ валюты пользователя
<span className="text-2xl text-gray-500 font-bold">{getCurrencySymbol(currency)}</span>

// Расчет потенциальной прибыли в валюте пользователя
formatCurrency(Number(amount) * leverage * 0.1, currency, 0)
```

### При создании сделки:
```javascript
const newDeal: ActiveDeal = {
  // ...
  amount: betAmount, // Сумма уже в валюте пользователя
  currency: currency // Сохраняем валюту сделки
};
```

### При расчете PnL:
```javascript
const rawPnl = pnlRatio * deal.leverage * deal.amount; // PnL в валюте сделки
// Отображение в валюте пользователя
formatCurrency(rawPnl, currency, 0)
```

### В истории сделок:
```javascript
amount: `${isWinning ? '+' : '-'}${formatCurrency(Math.abs(netProfit), userCurrency, 0)}`
```

## Совместимость с базой данных:
- В БД суммы по-прежнему сохраняются в USD для совместимости
- При сохранении происходит автоматическая конвертация: `convertToUSD(deal.amount, deal.currency)`
- При загрузке происходит обратная конвертация в валюту пользователя

Теперь система полностью поддерживает торговлю в любой валюте пользователя!